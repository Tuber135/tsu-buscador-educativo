<div class="min-h-screen bg-gradient-to-br from-amber-100 to-orange-100 font-sans">
  <div class="bg-white bg-opacity-10 py-4 px-8">
    <div class="flex items-center justify-center gap-3 bg-white rounded-full py-3 px-6 shadow-lg border-2 border-gray-800 max-w-md mx-auto">
      <span class="text-lg font-medium text-gray-700">{{tema}}</span>
      <svg class="w-5 h-5 fill-gray-700" viewBox="0 0 24 24">
        <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
      </svg>
    </div>
  </div>

  <div class="flex flex-col lg:flex-row gap-8 px-6 py-8 max-w-7xl mx-auto">
    <!-- Sección principal del resumen -->
    <div class="lg:w-2/3">
      <div class="bg-white rounded-xl p-8 shadow-lg border border-gray-200">
        <h3 class="text-xl font-semibold text-amber-800 mb-4">Resumen del Tema</h3>
        <div class="text-gray-700 leading-relaxed text-base mb-6 prose prose-amber max-w-none">
          <markdown [data]="resumen"></markdown>
        </div>
        
        @if (causas && causas.length > 0) {
          <div class="mt-6">
            <h4 class="text-lg font-semibold text-amber-800 mb-3">Causas principales:</h4>
            <ul class="space-y-2">
              @for (causa of causas; track causa) {
                <li class="flex items-start gap-2">
                  <span class="text-amber-600 font-bold mt-1">•</span>
                  <span class="text-gray-700">{{causa}}</span>
                </li>
              }
            </ul>
          </div>
        }
        
        <div class="mt-8 p-4 bg-amber-50 rounded-lg border-l-4 border-amber-500">
          <p class="text-amber-800 font-medium">💡 Usa este tiempo para estudiar y comprender el tema. Al finalizar el tiempo, podrás responder el cuestionario.</p>
        </div>
        
        <div class="mt-4 p-4 bg-red-50 rounded-lg border-l-4 border-red-500">
          <p class="text-red-800 font-medium">⚠️ <strong>IMPORTANTE:</strong> Una vez que entres al cuestionario, <strong>no podrás volver</strong> a esta sección de estudio. Asegúrate de haber estudiado bien el tema antes de continuar.</p>
        </div>
      </div>
    </div>

    <!-- Panel del cronómetro -->
    <div class="lg:w-1/3">
      <!-- Título principal de la sección -->
      <h2 class="text-3xl font-bold text-amber-900 mb-6 text-center">📚 Tiempo de Estudio</h2>
      
      <!-- Cronómetro -->
      <div class="bg-white rounded-xl p-6 shadow-lg border border-gray-200 text-center sticky top-8">
        <div class="w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-amber-800">
          <svg class="w-10 h-10 fill-amber-800" viewBox="0 0 24 24">
            <path d="M15,1H9V3H15M11,14H13V8H11M19.03,7.39L20.45,5.97C20,5.46 19.55,5 19.04,4.56L17.62,6C16.07,4.74 14.12,4 12,4A9,9 0 0,0 3,13A9,9 0 0,0 12,22C17,22 21,17.97 21,13C21,10.88 20.26,8.93 19.03,7.39Z"/>
          </svg>
        </div>
        
        <div class="text-4xl font-bold text-amber-800 mb-2">{{tiempoRestante}}</div>
        <p class="text-gray-600 mb-4">minutos restantes</p>
        
        <div class="w-full bg-gray-200 rounded-full h-3 mb-4">
          <div class="bg-gradient-to-r from-amber-500 to-amber-600 h-3 rounded-full transition-all duration-1000" 
               [style.width.%]="porcentajeTranscurrido"></div>
        </div>
        
        <p class="text-sm text-gray-600 mb-4">Cuando el tiempo termine, automáticamente pasarás al cuestionario.</p>
        
        <!-- Botón para testing - solo visible en desarrollo -->
        <button class="bg-blue-500 hover:bg-blue-600 text-white text-sm py-2 px-4 rounded-lg transition-colors duration-300" 
                (click)="saltarAlCuestionario()">
          🚀 Ir al Cuestionario (Testing)
        </button>
      </div>
    </div>
  </div>
</div>
